!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e,r){var o=e(document),i=CosmosWP_Customizer_Builder.is_rtl,n=function(n,l){var s={id:l,controlId:"",cols:12,cellHeight:45,items:[],container:null,ready:!1,devices:{desktop:CosmosWP_Customizer_Builder.desktop_label,mobile:CosmosWP_Customizer_Builder.mobile_tablet_label},activePanel:"desktop",panels:{},activeRow:"main",draggingItem:null,getTemplate:_.memoize(function(){var t=this,r={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(o,i,n){return _.isUndefined(i)&&(i="tmpl-customize-control-"+t.type),!_.isUndefined(n)&&_.isString(n)?r.variable=n:r.variable="data",_.template(e("#"+i).html(),null,r)(o)}}),drag_drop:function(){var t=this;e(".cwp-czr-bldr--pnl",t.container).each(function(){var r=e(this),o=r.data("device"),i=[];t.panels[o]={},e(".cwp-czr-bldr-itms",r).each(function(t){var r,n=e(this).attr("data-id")||"";r=n?"_sid_"+o+"-"+n:"_sid_"+o+t,e(this).attr("id",r),i[t]="#"+r}),e(".cwp-czr-bldr--grid-stk",r).each(function(){var r=e(this).attr("data-id")||"";t.panels[o][r]=e(this),e(this).droppable({out:function(t,e){},over:function(t,e){},drop:function(r,o){var i=e(this);t.gridster(i,o,r),t.save()}})});var n=e("#_sid_all-sidebar",r),a=n.attr("id")||!1;e(".cwp-czr-bldr--avbl-itms .cwp-czr-bldr--grid-stk-itm",r).draggable({revert:"invalid",connectToSortable:!!a&&"#"+a,start:function(t,o){e("body").addClass("builder-item-moving"),e(".cwp-czr-bldr-itms",r).css("z-index",""),o.helper.parent().css("z-index",9999),o.helper.closest(".cwp-czr-bldr--avbl-itms").addClass("cwp-czr-bldr-itms--moving")},stop:function(t,o){e("body").removeClass("builder-item-moving"),e(".cwp-czr-bldr-itms",r).css("z-index",""),e(".cwp-czr-bldr--avbl-itms",r).removeClass("cwp-czr-bldr-itms--moving"),o.helper.parent().css("z-index","")}}),n.length>0&&(n.sortable({revert:!0,change:function(e,r){t.save()},receive:function(r,o){e(this).find(".cwp-czr-bldr--grid-stk-itm").removeAttr("style").attr("data-gs-width",1),t.save()}}),t.panels[o].sidebar=n),e(".cwp-czr-bldr--avbl-itms .cwp-czr-bldr--grid-stk-itm",r).resizable({handles:"w, e",stop:function(e,r){t.setGridWidth(r.element.parent(),r),t.save()}})})},sortGrid:function(t){e(".cwp-czr-bldr--grid-stk-itm",t).each(function(){var t=e(this),r=t.attr("data-gs-x")||0;r=parseInt(r);var o=t.next();if(o.length>0){var i=o.attr("data-gs-x")||0;r>(i=parseInt(i))&&t.insertAfter(o)}})},getX:function(t){var e=t.attr("data-gs-x")||0;return parseInt(e)},getW:function(t,e){var r;return _.isUndefined(e)&&(e=!1),r=e?t.attr("data-df-width")||1:t.attr("data-gs-width")||1,parseInt(r)},gridGetItemInfo:function(t,e,r){var o,i=this,n=i.getX(t),a=i.getW(t),l=0,s=0,c=!1;for(o=n-1;o>=0&&!c;)0===e[o]?l++:c=!0,o--;for(c=!1,o=n+a;o<i.cols&&!c;)0===e[o]?s++:c=!0,o++;return{flag:e,x:n,w:a,item:t,before:l,after:s,id:t.attr("data-id")||"",wrapper:r}},updateItemsPositions:function(e){for(var r=this.cols,o=0;o<=r;o++)"object"!==t(e[o])&&"function"!=typeof e[o]||e[o].attr("data-gs-x",o)},gridster:function(t,e,r){var o,n=[],a=this,l=this.cols,s=function(t){for(var e=t.x,r=t.w,o=t.el,i=e;i<e+r;i++)n[i]=i===e?o:1},c=function(t){for(var e=t.x,r=t.w,o=(t.el,e);o<e+r;o++)n[o]=0},d=function(t,e){for(var r=0,o=t;o<l;o++)if(0===n[o])r++;else if(e)return r;return r},p=function(t,e){var r=0;void 0===e&&(e=!1);for(var o=t;o>=0;o--)if(0===n[o])r++;else if(e)return r;return r},f=function(t){return 0===n[t]},w=function(t,e){for(var r=t;r<t+e;){if(0!==n[r])return!1;r++}return!0},g=function(t){if(t<0)return{x:-1,w:1};var e,r,o,_x=-1;if(n[t]<=1)for(e=t,o=!1;e>=0&&!o;)1!==n[e]&&0!==n[e]&&(_x=e,o=!0),e--;else _x=t;for(e=_x+1,r=_x;1===n[e];)r++,e++;return{x:_x,w:r+1-_x}},v=function(t){var e,r,o,_x=-1;if(n[t]<l)for(e=t,o=!1;e<l&&!o;)1!==n[e]&&0!==n[e]&&(_x=e,o=!0),e++;else _x=t;for(e=_x+1,r=_x;1===n[e];)r++,e++;return{x:_x,w:r+1-_x}},u=function(t,e){var r=n.slice(),o=p(t);if(0===o)return e;var i,a=g(t),l=a.x>=0?a.x+a.w-1:t;i=e>o?o:e;for(var s=0,c=0,d=l;c<=i&&d>=0;)0===n[d]&&(c++,s=d),d--;var f=[],w=0;for(d=s;d<=l;d++)n[d]=0,0!==r[d]&&(f[w]=r[d],w++);for(w=0,d=s;d<=l;d++)void 0!==f[w]?n[d]=f[w]:n[d]=0,w++;return e-i},b=function(t,e){var r=n.slice(),o=d(t);if(0===o)return e;var i,a=g(t),s=a.x>=0?a.x:t;i=e<=o?e:o;for(var c=t,p=0,f=s;p<i&&f<l;)0===n[f]&&(p++,c=f),f++;var w=[],v=0;for(f=s;f<=c;f++)n[f]=0,0!==r[f]&&(w[v]=r[f],v++);for(v=w.length-1,f=c;f>=s;f--)void 0!==w[v]?n[f]=w[v]:n[f]=0,v--;return e-i},h=function(){a.updateItemsPositions(n)},m=function(t,e){var _x,r,o,i,c=t.x,m=t.w,z=function(){for(var t=0,e=0;e<l;e++)0===n[e]&&t++;return t}();if(z<=0)return!1;if(_.isUndefined(e)&&(e=!1),!e){if(f(c)){if(w(c,i=m))return s(t),t.el.attr("data-gs-x",c),t.el.attr("data-gs-width",i),!0;for((_x=(r=d(c,!0))+(o=p(c-1,!0))>=m&&m-r<=o?c-(m-r):c-o)<0&&(_x=0),console.log("_re",r),console.log("_le",o),console.log("__x",_x);i>=1;){if(w(_x,i))return console.log({x:_x,w:i}),t.x=_x,t.w=i,s(t),t.el.attr("data-gs-x",_x),t.el.attr("data-gs-width",i),!0;i--}}if(1===n[c]){var x=g(c);if(x.x>=0&&c>x.x+Math.floor(x.w/2)&&c>x.x&&(_x=x.x+x.w,r=d(_x,!0),console.log("__re",r),console.log("__re_X",_x),r>=m))return s({el:t.el,x:_x,w:m}),t.el.attr("data-gs-x",_x),t.el.attr("data-gs-width",m),!0}}console.log("--------------------------------------------------------"),function(t,_x){var e,r,o,i,l=0,s=!1;if(console.log("insert at x",_x),console.log("insert node",t),f(_x)){if(console.log("empty_at_X",_x),e=g(_x),r=v(_x),e.x>-1){if(console.log("found_item_left",e),(l=d(e.x))>=t.w)if(w(_x,t.w))console.log("found",t),c=_x,s=!0;else if(t.ox>_x)for(o=e.x+e.w,i=(i=p(o))<=t.w?t.w-i:t.w,b(o+1,i),l=d(o),console.log("loop_start_i",o),s=!1;o>e.x+e.w&&!s;)w(o,t.w)&&(console.log("found_in_loop__i",o),c=o,s=!0),o--;if(!s&&t.ox<_x){console.log("try_move_items_to_left",e),o=e.x+e.w-1,i=p(e.x),console.log("el",i),i>t.w&&(i=t.w),i-=2,u(e.x,i),console.log("try_move_items_to_left_flag",n),console.log("el2",i),o-=l=d(o),r=v(_x);var h=e.x+e.w;for(r.x>-1&&(h=r.x),console.log("loop_start 2_i",o);o<h&&!s;)w(o,t.w)&&(console.log("found_in_loop__@__i",o),c=o,s=!0),o++}s||(c=e.x+e.w,t.w=l,t.x=c,console.log("resize_new_w",l),console.log("resize_new_x",c))}else if(r.x>-1){console.log("found_item_right",r),r=v(_x),l=d(_x,!1),console.log("move_all_item_to Right");var m=l>=t.w?t.w:l;for(b(_x,m),o=r.x,console.log("loop_start Right",o);o>=0&&!s;)w(o,t.w)&&(c=o,t.x=c,s=!0,console.log("found_in_while_r",o)),o--;s||(c=_x,t.w=l,t.x=c,console.log("resize_r_new_w",l),console.log("resize_r_new_x",c))}}else if(console.log("x is not empty"),e=g(_x),t.ox<e.x)if(u(_x,t.w),console.log("Move All items to left"),f(_x))c=_x;else{for(;!f(_x)&&_x<=a.cols-1;)_x++;c=_x}else if(b(_x,t.w),console.log("Move All items to right"),f(_x))c=_x;else{for(;!f(_x)&&_x>=0;)_x--;c=_x}c>a.cols&&(c=a.cols-1),t.x=c,console.log("new node x",c)}(t,_.clone(c));var y,C=c,k=!1,I=0;for(c+m>a.cols-1&&(I=p(c,!0),console.log("le",I),I>0&&console.log("move_Left",c+m-a.cols-1)),h(),I=0;m>=1;){if(z>=m){if(w(c,m))return console.log("",{x:c,w:m}),t.w=m,s(t),t.el.attr("data-gs-x",c),t.el.attr("data-gs-width",m),!0;for(k=!1,I=p(c,!0),C=c-I,console.log("newX",C),y=C;y<l&&!k;){if(w(y,m))return console.log("Insert in While",{x:y,w:m}),t.w=m,s({el:t.el,x:y,w:m}),t.el.attr("data-gs-x",y),t.el.attr("data-gs-width",m),k=!0,!0;y++}}m--}for(m=t.w,k=!1;m>=1;){for(y=0;y<l&&!k;){if(w(y,m))return console.log("Insert in While 2",{x:y,w:m}),s({el:t.el,x:y,w:m}),t.el.attr("data-gs-x",y),t.el.attr("data-gs-width",m),k=!0,!0;y++}m--}return console.log("Insert END While",{x:y,w:m}),!1};o=(n=(a=this).getFlag(t)).slice();var z=t.offset();a.draggingItem=e.draggable;var x,y,C,k,I=t.width(),P=I/a.cols,D=0,S=e.offset;y=a.getW(e.draggable,!1),x=a.getW(e.draggable,!0),C=e.draggable.width(),console.log("DROP ITEM WIDTH",x),console.log("DROP ITEM cw WIDTH",y);var A=a.getX(e.draggable);i&&c({el:e.draggable,x:A,w:x});var W,R=0,T=0,G=!1;if(e.draggable.parent().is(t)?(k=!0,console.log("Item in this row"),x=y):(k=!1,console.log("Not in this row"),x<y&&(x=y)),i?(R=Math.round((z.left+I+10-r.clientX)/P),(T=Math.round((z.left+I-(S.left+C+10))/P))<0&&(T=0)):(R=Math.round((r.clientX-z.left)/P),(T=Math.round((S.left-z.left-10)/P))<0&&(T=0)),R>a.cols&&(R=a.cols),D=T,W=T,i)if(f(W))D=T,G=!0;else for(;W<a.cols&&!G;)f(W)?G=!0:W++;else if(f(D))D=T,G=!0;else{for(;D<=R&&!G;)f(D)?G=!0:D++;D>R&&(D=R)}if(G||(D=k?T:R),D<0&&(D=0),D+x>=a.cols){for(G=!0,W=D;W+x>a.cols&&G;)f(W)?W--:(W++,G=!1),console.log("loop_i",W);console.log("Find new _i, w: "+x,W),D=W}console.log("DROP Cursor",R),console.log("DROP row x cacl",D),console.log("DROP item w",x);var M={el:e.draggable,x:D,w:x,ox:A,ow:y};M.x<=0&&(M.x=0);var F=!1;k?(M.x=parseInt(e.draggable.attr("data-gs-x")||0),M.w=parseInt(e.draggable.attr("data-gs-width")||1),console.log("swap node",M),function(t,e){t.x;var r=t.w;c(t),console.log("Swap newX",e),console.log("Before Swap FLAG",n);var o=g(e),i=0;if(o.x>-1&&(i=o.x+o.w),w(e,r))return s({el:t.el,x:e,w:r}),!0;if(i>0&&w(i,r)&&e>=i){var l=v(e);if(l.x>-1&&t.w+e>=l.x)for(var d=_.clone(e);d>i;){if(w(d,r))return s({el:t.el,x:d,w:r}),!0;d--}if(e+r>a.cols){var _x=a.cols-r;if(w(_x,r))return s({el:t.el,x:_x,w:r}),!0}return s({el:t.el,x:i,w:r}),!0}t.x=e,m(t,!0)}(M,D),F=!0):(F=m(M),console.log("Insert node")),F?(e.draggable.removeClass("item-from-list"),t.append(e.draggable),e.draggable.removeAttr("style"),console.log("DID Flag: ",n),a.draggingItem=null):(e.draggable.removeAttr("style"),console.log("Can not insert"),n=o),h(),a.updateAllGrids()},updateAllGrids:function(){var t=this;_.each(t.panels[t.activePanel],function(e,r){t.updateGridFlag(e)})},setGridWidth:function(t,e){var r,o,n=this,a=e.element,l=t.width(),s=e.size.width,c=e.originalSize.width,d=Math.ceil(l/n.cols)-1;i?(r=e.originalPosition.left>e.position.left,o=c!==s):(r=e.originalPosition.left>e.position.left,o=e.originalPosition.left<e.position.left);var p,f,w,g=e.originalElement.attr("data-gs-width")||1,v=e.originalElement.attr("data-gs-x")||0;g=parseInt(g),v=parseInt(v);var u,b=n.getFlag(t),h=n.gridGetItemInfo(e.originalElement,b,t);if(r)return i?(f=Math.floor((e.position.left-1)/d),(p=(f=n.cols-f)-v-g)>h.after&&(p=h.after),w=g+p,a.attr("data-gs-x",v).removeAttr("style"),a.attr("data-gs-width",w).removeAttr("style")):((p=v-(f=Math.floor((e.position.left-1)/d)))>h.before&&(p=h.before),f=v-p,w=g+p,a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",w).removeAttr("style")),void n.updateGridFlag(t);if(o)return i?(e.originalPosition.left!==e.position.left?(f=Math.floor((e.position.left-1)/d),(p=g+v-(f=n.cols-f))>g&&(p=0),w=g-p,(f=v)<=0&&(f=0),console.log("diffRight_RTL_COL_New __left")):(f=Math.ceil((e.position.left+e.size.width-11)/d),(p=v-(f=n.cols-f))>h.before&&(p=h.before),f=v-p,w=g+p),a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",w).removeAttr("style")):((w=g-(p=(f=Math.round((e.position.left-1)/d))-v))<=0&&(w=1,p=0),f=v+p,a.attr("data-gs-x",f).removeAttr("style"),a.attr("data-gs-width",w).removeAttr("style")),void n.updateGridFlag(t);var m,_=h.x;s<e.originalSize.width?((m=Math.round((e.position.left+e.size.width-11)/d))<=_&&(m=_+1),u=h.w-(_+h.w-m)):(m=Math.ceil((e.position.left+e.size.width-11)/d),u=h.w+(m-(_+h.w)),h.x+u>h.x+h.w+h.after&&(u=h.w+h.after)),u<=0&&(u=1),a.attr("data-gs-width",u).removeAttr("style"),n.updateGridFlag(t)},getFlag:function(t){var e,r=t.data("gridRowFlag")||[];if(_.isEmpty(r)){for(e=0;e<this.cols;e++)r[e]=0;t.data("gridRowFlag",r)}return r},updateGridFlag:function(t){var r,o=this,i=[];for(r=0;r<o.cols;r++)i[r]=0;return e(".cwp-czr-bldr--grid-stk-itm",t).each(function(t){e(this).removeAttr("style");var n=o.getX(e(this)),a=o.getW(e(this));for(r=n;r<n+a;r++)i[r]=r===n?e(this):1}),t.data("gridRowFlag",i),o.updateItemsPositions(i),o.sortGrid(t),i},addNewWidget:function(t,r){var o=this,i=o.container.find(".cwp-czr-bldr--pnl.cwp-czr-bldr--pnl-"+o.activePanel),n=r;_.isObject(n)||(n=i.find(".cwp-czr-bldr-itms").first());var a=t;a.draggable({revert:"invalid",appendTo:i,scroll:!1,zIndex:99999,handle:".cwp-czr-bldr--grid-stk-itm-cont",start:function(t,r){e("body").addClass("builder-item-moving"),e(".cwp-czr-bldr-itms",i).css("z-index",""),r.helper.parent().css("z-index",9999)},stop:function(t,r){e("body").removeClass("builder-item-moving"),e(".cwp-czr-bldr-itms",i).css("z-index",""),o.save()},drag:function(t,e){}}).resizable({handles:"w, e",start:function(t,e){e.originalElement.css({right:"auto",left:e.position.left})},stop:function(t,e){o.setGridWidth(e.element.parent(),e),o.save()}}),n.append(a),o.updateGridFlag(n)},addPanel:function(t){var r=this.getTemplate(),o="tmpl-cosmoswp-cb-panel";if(0!=e("#"+o).length)return _.isObject(n.rows)||(n.rows={}),'<div class="cwp-czr-bldr--pnl cwp-czr-bldr--pnl-'+t+'" data-device="'+t+'">'+r({device:t,id:n.id,rows:n.rows},o)+"</div>"},addDevicePanels:function(){var t=this;_.each(t.devices,function(r,o){var i=t.addPanel(o);e(".cwp-czr-bldr--devs-swch",t.container).append('<a href="#" class="at-cl at-p at-trs cwp-czr-bldr--devs-swch-itm cwp-czr-bldr--devs-swch-itm-'+o+'" data-device="'+o+'">'+r+"</a>"),e(".cwp-czr-bldr--body",t.container).append(i)})},addItem:function(t){var r=this.getTemplate(),o="tmpl-cosmoswp-cb-item";if(0!=e("#"+o).length){var i=r(t,o);return e(i)}},addAvailableItems:function(){var t=this;_.each(t.devices,function(r,o){var i=e('<div class="cwp-czr-bldr--avbl-itms at-pos at-bg-cl at-bdr at-min-h at-h at-w at-trs at-tf at-z-idx at-ovf-x at-ovf-y at-vis" data-device="'+o+'"></div>');e(".cwp-czr-bldr--pnl-"+o,t.container).append(i),i.append('<div class="cwp-czr-bldr--pnl-close at-flx at-jfy-cont-end at-m"><span class="at-btn at-trs at-bdr-rad at-flx at-jfy-cont-ctr at-al-itm-ctr cwp-czr-bldr--pnl-close-btn dashicons dashicons-no"></span></div>'),_.each(t.items,function(e){var r=!0;if(!_.isUndefined(e.devices)&&!_.isEmpty(e.devices))if(_.isString(e.devices))e.devices!=o&&(r=!1);else{var n=!1;_.each(e.devices,function(t){o==t&&(n=!0)}),n||(r=!1)}if(r){var a=t.addItem(e);i.append(a)}})})},switchToDevice:function(t,r){var o=this;_.size(o.devices)>1?(e(".cwp-czr-bldr--devs-swch a",o.container).removeClass("cwp-czr-bldr--devs-swch-itm-active"),e(".cwp-czr-bldr--devs-swch .cwp-czr-bldr--devs-swch-itm-"+t,o.container).addClass("cwp-czr-bldr--devs-swch-itm-active"),e(".cwp-czr-bldr--pnl",o.container).addClass("at-d-non"),e(".cwp-czr-bldr--pnl.cwp-czr-bldr--pnl-"+t,o.container).removeClass("at-d-non"),o.activePanel=t):e(".cwp-czr-bldr--devs-swch a",o.container).addClass("cwp-czr-bldr--devs-swch-itm-active");var i=e(".cwp-czr-bldr--devs-swch",o.container),n=i.find(".cwp-czr-bldr--devs-swch-itm-active");if(n.length){var a,l=i[0].getBoundingClientRect(),s=n[0].getBoundingClientRect(),c="rtl"===e("html").attr("dir"),d=s.width+"px";a=c?-(a=l.right-s.right):s.left-l.left,i[0].style.setProperty("--cwp-anime-slydr-w",d),i[0].style.setProperty("--cwp-slydr-x",a+"px")}(_.isUndefined(r)||r)&&("desktop"==t?e("#customize-footer-actions .preview-desktop").trigger("click"):"mobile"==t&&e("#customize-footer-actions .preview-mobile").trigger("click"))},addExistingRowsItems:function(){var t=this,o=r.control(t.controlId).setting._value;_.isObject(o)||(o=o?JSON.parse(o):{}),_.each(t.panels,function(r,i){var n={};_.isObject(o[i])&&(n=o[i]),_.each(n,function(o,n){_.isUndefined(o)||_.each(o,function(o,a){var l=e('.cwp-czr-bldr--avbl-itms[data-device="'+i+'"] .cwp-czr-bldr--grid-stk-itm[data-id="'+o.id+'"]').first();l.attr("data-gs-width",o.width),l.attr("data-gs-x",o.x),l.removeClass("item-from-list"),t.addNewWidget(l,r[n])})})}),t.ready=!0},focus:function(){this.container.on("click",".cwp-czr-bldr--grid-stk-itm-icon-set, .cwp-czr-bldr--grid-stk-itm-ttl, .cwp-czr-bldr--tooltip",function(t){t.preventDefault();var o=e(this).data("section")||"",i=e(this).attr("data-control")||"",n=!1;i&&(_.isUndefined(r.control(i))||(r.control(i).focus(),n=!0)),n||o&&!_.isUndefined(r.section(o))&&(r.section(o).focus(),n=!0)}),this.container.on("click",".cwp-czr-bldr--row-settings",function(t){t.preventDefault();var o=e(this).attr("data-id")||"",i=n.id+"_"+o;_.isUndefined(r.section(i))||r.section(i).focus()})},remove:function(){var t=this;o.on("click",".cwp-czr-bldr--pnl .cwp-czr-bldr--grid-stk-itm-icon-del",function(r){r.preventDefault();var o=e(this).closest(".cwp-czr-bldr--grid-stk-itm"),i=o.closest(".cwp-czr-bldr--pnl");o.attr("data-gs-width",1),o.attr("data-gs-x",0),o.removeAttr("style"),e(".cwp-czr-bldr--avbl-itms",i).append(o),t.updateAllGrids(),t.save()})},encodeValue:function(t){return encodeURI(JSON.stringify(t))},decodeValue:function(t){return JSON.parse(decodeURI(t))},save:function(){var t=this;if(t.ready){var o={};_.each(t.panels,function(r,i){o[i]={},_.each(r,function(r,n){var a=_.map(e(" > .cwp-czr-bldr--grid-stk-itm",r),function(r){return r=e(r),{x:t.getX(r),y:1,width:t.getW(r),height:1,id:r.data("id")||""}});o[i][n]=a})}),r.control(t.controlId).setting.set(t.encodeValue(o))}},showPanel:function(){var t=this;this.container.removeClass("cwp-czr-bldr--hide").addClass("cwp-czr-bldr--show"),setTimeout(function(){var r=t.container.height();e("#customize-preview").addClass("cb--preview-panel-show").css({bottom:r-1,"margin-top":"0px"})},100)},hidePanel:function(){this.container.removeClass("cwp-czr-bldr--show"),a(this.container.find(".cwp-czr-bldr--avbl-itms")),e("#customize-preview").removeClass("cb--preview-panel-show").removeAttr("style")},togglePanel:function(){var t=this;r.state("expandedPanel").bind(function(e){r.panel(n.panel).expanded()?(o.trigger("cosmoswp_panel_builder_open",[n.panel]),top._current_builder_panel=l,t.showPanel()):t.hidePanel()}),t.container.on("click",".cwp-czr-bldr--btn-close",function(r){r.preventDefault(),t.container.toggleClass("cwp-czr-bldr--hide");var o=e(this);t.container.hasClass("cwp-czr-bldr--hide")?(e("#customize-preview").removeClass("cb--preview-panel-show"),e(".panel-name-text").removeClass("at-d-non"),e(".close-text").addClass("at-d-non"),o.addClass("at-pos")):(e("#customize-preview").addClass("cb--preview-panel-show"),e(".panel-name-text").addClass("at-d-non"),e(".close-text").removeClass("at-d-non"),o.removeClass("at-pos"))})},panelLayoutCSS:function(){var t=e("#customize-controls").width();r.state("paneVisible").get()||(t=0),i?this.container.find(".cwp-czr-bldr--inner").css({"margin-right":t}):this.container.find(".cwp-czr-bldr--inner").css({"margin-left":t})},init:function(t,i,s){var c=this,d=c.getTemplate()(n,"tmpl-cosmoswp-builder-panel");c.container=e(d),e("body .wp-full-overlay").append(c.container),c.controlId=t,c.items=i,c.devices=s,n.section&&r.section(n.section).container.addClass("at-d-non"),c.addDevicePanels(),c.switchToDevice(c.activePanel),c.addAvailableItems(),c.switchToDevice(c.activePanel),c.drag_drop(),c.focus(),c.remove(),c.addExistingRowsItems(),r.panel(n.panel).expanded()?(console.log("open-builder:",n.panel),c.showPanel()):c.hidePanel(),r.previewedDevice.bind(function(t){"desktop"===t?c.switchToDevice("desktop",!1):c.switchToDevice("mobile",!1)}),c.togglePanel(),r.state("paneVisible").get()&&c.panelLayoutCSS(),r.state("paneVisible").bind(function(){c.panelLayoutCSS()}),e(window).resize(_.throttle(function(){c.panelLayoutCSS()},100)),c.container.on("click",".cwp-czr-bldr--devs-swch .cwp-czr-bldr--devs-swch-itm",function(t){t.preventDefault();var r=e(this).data("device");c.switchToDevice(r),e(".cwp-czr-bldr--body").find(".cwp-czr-bldr--avbl-itms").each(function(){a(e(this))})}),o.trigger("cosmoswp_builder_panel_loaded",[l,c])}};return s.init(n.control_id,n.items,n.devices),s};function a(t){var r=t.prev(".cwp-czr-bldr--add-btn");r.length||(r=r.prev(".cwp-czr-bldr--sidebar").find(".cwp-czr-bldr--add-btn")),t.length&&(t.removeClass("cwp-czr-bldr--avbl-itms-show"),e("body").removeClass("cwp-czr-bldr--body-ovl"),r.removeClass("cwp-czr-bldr--add-btn-anime"))}r.bind("ready",function(t,o){_.each(CosmosWP_Customizer_Builder.builders,function(t,e){new n(t,e)}),r.bind("pane-contents-reflowed",function(){setTimeout(function(){e("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice .footer_moved_widgets_text").length||e("#sub-accordion-panel-widgets .no-widget-areas-rendered-notice").append('<p class="footer_moved_widgets_text">'+CosmosWP_Customizer_Builder.footer_moved_widgets_text+"</p>")},1e3)}),r.state("expandedSection").bind(function(t){e(".cwp-czr-bldr--pnl .cwp-czr-bldr--grid-stk-itm").removeClass("cwp-czr-bldr--grid-stk-itm-active"),e(".cwp-czr-bldr--row").removeClass("cwp-czr-bldr--row-active"),t&&(e('.cwp-czr-bldr--row[data-id="'+t.id+'"]').addClass("cwp-czr-bldr--row-active"),e(".cwp-czr-bldr--pnl .cwp-czr-bldr--grid-stk-itm.for-s-"+t.id).addClass("cwp-czr-bldr--grid-stk-itm-active"))})}),o.on("click",".focus-section",function(t){t.preventDefault();var o=e(this).attr("data-id")||"";o||(o=(o=e(this).attr("href")||"").replace("#","")),o&&r.section(o)&&r.section(o).focus()}),o.on("click",".focus-control",function(t){t.preventDefault();var o=e(this).attr("data-id")||"";o||(o=(o=e(this).attr("href")||"").replace("#","")),o&&r.control(o)&&r.control(o).focus()}),o.on("click",".focus-panel",function(t){t.preventDefault();var o=e(this).attr("data-id")||"";o||(o=(o=e(this).attr("href")||"").replace("#","")),o&&r.panel(o)&&r.panel(o).focus()}),o.on("mouseover",".cwp-czr-bldr--row .cwp-czr-bldr--grid-stk-itm",function(t){var r=e(this);e(".cwp-czr-bldr--grid-stk-itm-icon-del",r).outerWidth()+e(".cwp-czr-bldr--grid-stk-itm-icon-set",r).outerWidth()>e(".cwp-czr-bldr--grid-stk-itm-cont",r).innerWidth()-50&&r.addClass("show-tooltip")}),o.on("mouseleave",".cwp-czr-bldr--row .cwp-czr-bldr--grid-stk-itm",function(t){e(this).removeClass("show-tooltip")}),o.on("click",".cwp-czr-bldr--add-btn",function(t){var r=e(this),o=r.next(".cwp-czr-bldr--avbl-itms");o.length||(o=r.closest(".cwp-czr-bldr--sidebar").next(".cwp-czr-bldr--avbl-itms")),o.length&&(o.toggleClass("cwp-czr-bldr--avbl-itms-show"),e("body").toggleClass("cwp-czr-bldr--body-ovl"),r.toggleClass("cwp-czr-bldr--add-btn-anime"))}),o.on("click",".cwp-czr-bldr--pnl-close-btn",function(t){a(e(this).closest(".cwp-czr-bldr--avbl-itms"))})}(jQuery,wp.customize||null)}();